<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Detalle del Activo</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/qrcode@1.5.1/build/qrcode.min.js"></script>
</head>
<body class="bg-light" style="background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);">

<div class="container mt-5">
    <div id="detalle-activo" class="card shadow p-4" style="border-radius: 15px; border: none;">
        <h2 class="mb-4" style="font-weight: bold; text-shadow: 2px 2px 4px rgba(0,0,0,0.1);">Información del Activo</h2>

        <div class="card shadow mb-4" style="border-radius: 15px; border: none;">
            <div class="card-header bg-primary text-white" style="border-radius: 15px 15px 0 0; font-weight: bold;">Detalles del Activo</div>
            <div class="card-body p-4">
                <h5 id="nombre-detalle" class="card-title" style="font-weight: bold;"></h5>
                <p id="descripcion-detalle" class="card-text"></p>
                <p><strong>Código de Referencia:</strong> <span id="codigoReferencia-detalle"></span></p>
                <p><strong>Última Revisión:</strong> <span id="fechaUltimaRevision-detalle"></span></p>
                <p><strong>Revisado por:</strong> <span id="revisadoPor-detalle"></span></p>
                <img id="qr-detalle" src="" alt="Código QR" class="img-fluid mt-3" style="border-radius: 10px;">
                <button class="btn btn-success mt-3" data-bs-toggle="modal" data-bs-target="#revisionModal" style="border-radius: 10px; padding: 10px 20px; font-weight: bold;">Registrar Revisión</button>
            </div>
        </div>

        <div class="d-flex justify-content-between mt-4">
            <a href="/index.html" class="btn btn-secondary" style="border-radius: 10px; padding: 10px 20px; font-weight: bold;">Volver al listado</a>
            <button id="btn-borrar-detalle" class="btn btn-danger" style="border-radius: 10px; padding: 10px 20px; font-weight: bold;">Borrar activo</button>
        </div>
    </div>

    <div id="error-detalle" class="alert alert-danger mt-4 d-none" role="alert" style="border-radius: 10px;">
        <strong>Error:</strong> <span id="mensaje-error">No se ha podido cargar el activo. Es posible que no exista o haya sido eliminado.</span>
    </div>

    <!-- Modal para Registrar Revisión -->
    <div class="modal fade" id="revisionModal" tabindex="-1" aria-labelledby="revisionModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content" style="border-radius: 15px; border: none;">
                <div class="modal-header" style="border-radius: 15px 15px 0 0; background-color: #f8f9fa;">
                    <h5 class="modal-title" id="revisionModalLabel" style="font-weight: bold;">Registrar Revisión</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body p-4">
                    <form id="revision-form">
                        <div class="mb-3">
                            <label for="revisadoPor" class="form-label" style="font-weight: bold;">Revisado por</label>
                            <input type="text" class="form-control" id="revisadoPor" required style="border-radius: 10px; padding: 10px;">
                        </div>
                    </form>
                </div>
                <div class="modal-footer" style="border-radius: 0 0 15px 15px; background-color: #f8f9fa;">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal" style="border-radius: 10px; padding: 10px 20px; font-weight: bold;">Cerrar</button>
                    <button type="button" class="btn btn-primary" onclick="guardarRevision()" style="border-radius: 10px; padding: 10px 20px; font-weight: bold;">Guardar</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Tabla de Historial de Revisiones -->
    <div class="card shadow mt-4" style="border-radius: 15px; border: none;">
        <div class="card-header bg-secondary text-white" style="border-radius: 15px 15px 0 0; font-weight: bold;">Historial de Revisiones</div>
        <div class="card-body p-4">
            <table class="table">
                <thead>
                    <tr>
                        <th style="font-weight: bold;">Fecha</th>
                        <th style="font-weight: bold;">Revisado por</th>
                    </tr>
                </thead>
                <tbody id="historial-revisiones"></tbody>
            </table>
        </div>
    </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
<script src="/js/app.js"></script>
</body>
</html>
